<template>
    <div :style="{height: `${this.windowHeight - 60}px`}" id="landing_block" class="landing_block pb-14 pr-4">
      <div class="absolute right-96 top-32">
        <svg xmlns="http://www.w3.org/2000/svg" width="640.217" height="846.577" viewBox="0 0 640.217 846.577">
          <g id="Groupe_1" class="astrid_head" data-name="Groupe 1" transform="translate(-977.074 -310.48)">
            <path id="Tracé_1" data-name="Tracé 1" d="M1285.675,726.795c-102.847-3.213-168.458-86.531-157.809-147.336-8.484-85.041-5.055-121.776,0-141.59s-9.171-141.045,86.713-195.131,170.644-20.55,193.07-10.75,30.458,50.958,65.517,83.179,15.761,31.727,5.894,47.714,12.271,22.773,21.722,32.8c2.975,22.37,23.064,39.123,19.85,98.124,27.661-32.89,93.434-93.967,55.885,61.414-49.506,60.271-65.671,24.238-65.671,24.238-19.975,56.972-58.471,96.664-96.237,113.555S1343.6,724.6,1285.675,726.795Z" transform="translate(-66.649 138.676)" fill="none" stroke="#000" stroke-width="1"/>
            <path id="Tracé_4" data-name="Tracé 4" d="M1189.146,288.446c-13.317,24.446-55.333,92.412-17.527,82.225" transform="translate(-4.286 279.652)" fill="none" stroke="#000" stroke-width="1"/>
            <path id="Tracé_5" data-name="Tracé 5" d="M1186.541,288.446c-18.519,31.484,12.618,31.017,34.249,49.288,17.386,21.662-2.223,31.046-28.8,31.928" transform="translate(41.653 279.652)" fill="none" stroke="#000" stroke-width="1"/>
            <path id="Tracé_6" data-name="Tracé 6" d="M1134.8,299.213c16.163-19.7,38.544-27.714,74.516-9.268C1172.275,311.228,1134.8,299.213,1134.8,299.213Z" transform="translate(-44.147 263.112)" fill="none" stroke="#000" stroke-width="1"/>
            <path id="Tracé_7" data-name="Tracé 7" d="M1195.422,290.353c18.016-18.327,68.411-15.684,80.434,5.749C1266.357,309.642,1195.422,290.353,1195.422,290.353Z" transform="translate(68.694 260.49)" fill="none" stroke="#000" stroke-width="1"/>
            <path id="Tracé_8" data-name="Tracé 8" d="M1125.619,322.474s25.5-64.818,96.735-49.119c-17.054-38.206-81.736,2.392-96.735,26.93C1125.377,310.833,1125.619,322.474,1125.619,322.474Z" transform="translate(-61.435 222.386)" fill="none" stroke="#000" stroke-width="1"/>
            <path id="Tracé_9" data-name="Tracé 9" d="M1193.42,279.283c30.677-5.053,103.126-12.854,122.667,29.229,6.677-17.2-37.389-63.369-115.4-50.185C1192.78,267.391,1193.42,279.283,1193.42,279.283Z" transform="translate(64.945 219.241)" fill="none" stroke="#000" stroke-width="1"/>
            <path id="Tracé_11" data-name="Tracé 11" d="M1136.886,325.412s-51.4,43.016,3.682,65.606" transform="translate(-80.824 348.46)" fill="none" stroke="#000" stroke-width="1"/>
            <path id="Tracé_13" data-name="Tracé 13" d="M1264,344.484s-7.292,36.826,8.122,32.666S1264,344.484,1264,344.484Z" transform="translate(193.131 383.959)" fill="none" stroke="#000" stroke-width="1"/>
            <path id="Tracé_14" data-name="Tracé 14" d="M1127.7,346.037s-20.874,26.476-8.734,38.4C1130.552,366.186,1127.7,346.037,1127.7,346.037Z" transform="translate(-80.689 386.85)" fill="none" stroke="#000" stroke-width="1"/>
            <path id="Tracé_15" data-name="Tracé 15" d="M1135.9,570.155s-38.552-82.894-20.177-158.166c28.73-70.338,70.363-170.9,129.392-202.086,62.841-22.217,86.083-5.888,100.774,0,16.638-8.977,150.467-30.985,216.845,83.016,66.378,115.2,139.013,307.213,142.948,441.089-6.906,51.839-10.1,30.939-38.448,51.065" transform="translate(-88.893 112.39)" fill="none" stroke="#000" stroke-width="1"/>
            <path id="Tracé_16" data-name="Tracé 16" d="M1132.363,350.249s4.708,32.178,32.027,71.253,23.1,49.516,13.2,80.065c-21.358,26.261-50.634,1.857-55.134,114.877,10.535,103.432-22.928,122.7,9.9,139.457" transform="translate(-76.301 394.691)" fill="none" stroke="#000" stroke-width="1"/>
            <path id="Tracé_17" data-name="Tracé 17" d="M1151.988,344.484c-43.35,50.845-50.539,58.794-37.106,70.362s51.257-29.408,37.106,9.364-81.138,145.5-47.259,263.967,67.5,77.58,67.5,77.58" transform="translate(-117.717 383.959)" fill="none" stroke="#000" stroke-width="1"/>
            <path id="Tracé_18" data-name="Tracé 18" d="M1163.956,279.514c-3.752,45.874,142.047,44.667,200.161-5.423C1317.589,271.375,1167.708,233.641,1163.956,279.514Z" transform="translate(-41.454 454.601)" fill="none" stroke="#000" stroke-width="1"/>
          </g>
        </svg>      </div>
      <div class="landing_block--left h-full flex flex-col justify-between">
        <a href="#" class="landing_block--left__top text-linkBig">{{ homeContent.title }}</a>
        <div class="landing_block--left__center">
          <h1 class="title-font title-big">{{ homeContent.presentation }}</h1>
          <h1 class="title-font title-big">{{ homeContent.catch_phrase }}</h1>
        </div>
        <div @click="onButtonClick()" class="landing_block--left__bottom group flex items-center cursor-pointer">
            <button class="btn absolute landing_block--left__bottom__left">
              <ArrowRight width="20" height="20" class="" style="margin: auto; transform:rotate(90deg)"/>
            </button>
            <span href="" class="ml-14 text-linkBig">{{ homeContent.label_cta }}</span>
        </div>
      </div>
    </div>
</template>
*
<script>
import ArrowRight from '~/components/Icons/ArrowRight.vue'
import axios from "axios"
import gsap from "gsap"
import ScrollToPlugin from "gsap/ScrollToPlugin"
gsap.registerPlugin(ScrollToPlugin)

export default {
  name: 'LandingBlock',
  components: {
    ArrowRight
  },
  props: ['windowHeight'],
  data () {
    return {
      articles: [],
      error: null,
      homeContent: []
    }
  },
  async beforeMount () {
    let response = this.getDatas('http://localhost:1337/accueil')
    response.then( value => { this.homeContent = value } )
    this.$store.watch(() => {
      if(this.$store.state.language === 'en') {
          let response = this.getDatas('http://localhost:1337/accueil?_locale=en')
          response.then( value => this.homeContent = value )
        } else if (this.$store.state.language === 'fr') {
          let response = this.getDatas('http://localhost:1337/accueil')
          response.then( value => this.homeContent = value )
        }
    })
  },
  methods: {
    getDatas: async function(url) {
      try {
          const response = await axios.get(url)
          return response.data
      } catch (error) {
          console.log(error)
      }
    },
    onButtonClick: function() {
      gsap.killTweensOf(window)
      gsap.to(window, {duration: 1, scrollTo: ".section", ease: "power4.inOut"})

    }
  }
}
</script>
<style scoped>
  .landing_page--left__top {
      margin-bottom: 13rem;
  }

  .landing_page--left__center {
      margin-bottom: 23.5rem;
  }

  .landing_block--right__top {
    position: relative;
    left: 12px;
  }

  .landing_block--left__bottom__left {
    left: 112px;
  }

  .astrid_head {
  stroke-dasharray: 1700;
  stroke-dashoffset: 1700;
  animation: dash 5s ease-in forwards;
  }

@keyframes dash {
  to {
    stroke-dashoffset: 0;
  }
}

</style>
